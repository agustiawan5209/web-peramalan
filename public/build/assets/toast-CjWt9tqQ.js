import{r as s,j as n}from"./app-CwzCkPZf.js";import{P as A,r as we,d as xe}from"./index-BsY3OrU1.js";import{e as Ee,b as ye,a as he,f as C,h as W,B as Pe,m as be,P as Ce,g as ge}from"./Combination-5J8sRYF3.js";import{u as te}from"./index-B0Fnjf-p.js";import{P as Re}from"./nav-user-pmqD2dbs.js";import{a as re}from"./index-Da9yyfr_.js";var G="ToastProvider",[J,Se,Ne]=Ee("Toast"),[oe,ot]=ye("Toast",[Ne]),[Ie,$]=oe(G),se=t=>{const{__scopeToast:r,label:o="Notification",duration:e=5e3,swipeDirection:u="right",swipeThreshold:l=50,children:p}=t,[T,v]=s.useState(null),[a,b]=s.useState(0),E=s.useRef(!1),D=s.useRef(!1);return o.trim()||console.error(`Invalid prop \`label\` supplied to \`${G}\`. Expected non-empty \`string\`.`),n.jsx(J.Provider,{scope:r,children:n.jsx(Ie,{scope:r,label:o,duration:e,swipeDirection:u,swipeThreshold:l,toastCount:a,viewport:T,onViewportChange:v,onToastAdd:s.useCallback(()=>b(R=>R+1),[]),onToastRemove:s.useCallback(()=>b(R=>R-1),[]),isFocusedToastEscapeKeyDownRef:E,isClosePausedRef:D,children:p})})};se.displayName=G;var ne="ToastViewport",Fe=["F8"],B="toast.viewportPause",z="toast.viewportResume",ae=s.forwardRef((t,r)=>{const{__scopeToast:o,hotkey:e=Fe,label:u="Notifications ({hotkey})",...l}=t,p=$(ne,o),T=Se(o),v=s.useRef(null),a=s.useRef(null),b=s.useRef(null),E=s.useRef(null),D=te(r,E,p.onViewportChange),R=e.join("+").replace(/Key/g,"").replace(/Digit/g,""),S=p.toastCount>0;s.useEffect(()=>{const c=y=>{var m;e.length!==0&&e.every(w=>y[w]||y.code===w)&&((m=E.current)==null||m.focus())};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[e]),s.useEffect(()=>{const c=v.current,y=E.current;if(S&&c&&y){const f=()=>{if(!p.isClosePausedRef.current){const h=new CustomEvent(B);y.dispatchEvent(h),p.isClosePausedRef.current=!0}},m=()=>{if(p.isClosePausedRef.current){const h=new CustomEvent(z);y.dispatchEvent(h),p.isClosePausedRef.current=!1}},w=h=>{!c.contains(h.relatedTarget)&&m()},x=()=>{c.contains(document.activeElement)||m()};return c.addEventListener("focusin",f),c.addEventListener("focusout",w),c.addEventListener("pointermove",f),c.addEventListener("pointerleave",x),window.addEventListener("blur",f),window.addEventListener("focus",m),()=>{c.removeEventListener("focusin",f),c.removeEventListener("focusout",w),c.removeEventListener("pointermove",f),c.removeEventListener("pointerleave",x),window.removeEventListener("blur",f),window.removeEventListener("focus",m)}}},[S,p.isClosePausedRef]);const d=s.useCallback(({tabbingDirection:c})=>{const f=T().map(m=>{const w=m.ref.current,x=[w,...Ue(w)];return c==="forwards"?x:x.reverse()});return(c==="forwards"?f.reverse():f).flat()},[T]);return s.useEffect(()=>{const c=E.current;if(c){const y=f=>{var x,h,N;const m=f.altKey||f.ctrlKey||f.metaKey;if(f.key==="Tab"&&!m){const j=document.activeElement,F=f.shiftKey;if(f.target===c&&F){(x=a.current)==null||x.focus();return}const I=d({tabbingDirection:F?"backwards":"forwards"}),k=I.findIndex(i=>i===j);Y(I.slice(k+1))?f.preventDefault():F?(h=a.current)==null||h.focus():(N=b.current)==null||N.focus()}};return c.addEventListener("keydown",y),()=>c.removeEventListener("keydown",y)}},[T,d]),n.jsxs(Pe,{ref:v,role:"region","aria-label":u.replace("{hotkey}",R),tabIndex:-1,style:{pointerEvents:S?void 0:"none"},children:[S&&n.jsx(q,{ref:a,onFocusFromOutsideViewport:()=>{const c=d({tabbingDirection:"forwards"});Y(c)}}),n.jsx(J.Slot,{scope:o,children:n.jsx(A.ol,{tabIndex:-1,...l,ref:D})}),S&&n.jsx(q,{ref:b,onFocusFromOutsideViewport:()=>{const c=d({tabbingDirection:"backwards"});Y(c)}})]})});ae.displayName=ne;var ie="ToastFocusProxy",q=s.forwardRef((t,r)=>{const{__scopeToast:o,onFocusFromOutsideViewport:e,...u}=t,l=$(ie,o);return n.jsx(re,{"aria-hidden":!0,tabIndex:0,...u,ref:r,style:{position:"fixed"},onFocus:p=>{var a;const T=p.relatedTarget;!((a=l.viewport)!=null&&a.contains(T))&&e()}})});q.displayName=ie;var O="Toast",_e="toast.swipeStart",Ae="toast.swipeMove",De="toast.swipeCancel",je="toast.swipeEnd",ce=s.forwardRef((t,r)=>{const{forceMount:o,open:e,defaultOpen:u,onOpenChange:l,...p}=t,[T,v]=he({prop:e,defaultProp:u??!0,onChange:l,caller:O});return n.jsx(Re,{present:o||T,children:n.jsx(Oe,{open:T,...p,ref:r,onClose:()=>v(!1),onPause:W(t.onPause),onResume:W(t.onResume),onSwipeStart:C(t.onSwipeStart,a=>{a.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:C(t.onSwipeMove,a=>{const{x:b,y:E}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","move"),a.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${b}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${E}px`)}),onSwipeCancel:C(t.onSwipeCancel,a=>{a.currentTarget.setAttribute("data-swipe","cancel"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:C(t.onSwipeEnd,a=>{const{x:b,y:E}=a.detail.delta;a.currentTarget.setAttribute("data-swipe","end"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),a.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),a.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${b}px`),a.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${E}px`),v(!1)})})})});ce.displayName=O;var[Le,Me]=oe(O,{onClose(){}}),Oe=s.forwardRef((t,r)=>{const{__scopeToast:o,type:e="foreground",duration:u,open:l,onClose:p,onEscapeKeyDown:T,onPause:v,onResume:a,onSwipeStart:b,onSwipeMove:E,onSwipeCancel:D,onSwipeEnd:R,...S}=t,d=$(O,o),[c,y]=s.useState(null),f=te(r,i=>y(i)),m=s.useRef(null),w=s.useRef(null),x=u||d.duration,h=s.useRef(0),N=s.useRef(x),j=s.useRef(0),{onToastAdd:F,onToastRemove:U}=d,_=W(()=>{var P;(c==null?void 0:c.contains(document.activeElement))&&((P=d.viewport)==null||P.focus()),p()}),I=s.useCallback(i=>{!i||i===1/0||(window.clearTimeout(j.current),h.current=new Date().getTime(),j.current=window.setTimeout(_,i))},[_]);s.useEffect(()=>{const i=d.viewport;if(i){const P=()=>{I(N.current),a==null||a()},g=()=>{const L=new Date().getTime()-h.current;N.current=N.current-L,window.clearTimeout(j.current),v==null||v()};return i.addEventListener(B,g),i.addEventListener(z,P),()=>{i.removeEventListener(B,g),i.removeEventListener(z,P)}}},[d.viewport,x,v,a,I]),s.useEffect(()=>{l&&!d.isClosePausedRef.current&&I(x)},[l,x,d.isClosePausedRef,I]),s.useEffect(()=>(F(),()=>U()),[F,U]);const k=s.useMemo(()=>c?me(c):null,[c]);return d.viewport?n.jsxs(n.Fragment,{children:[k&&n.jsx(ke,{__scopeToast:o,role:"status","aria-live":e==="foreground"?"assertive":"polite","aria-atomic":!0,children:k}),n.jsx(Le,{scope:o,onClose:_,children:we.createPortal(n.jsx(J.ItemSlot,{scope:o,children:n.jsx(be,{asChild:!0,onEscapeKeyDown:C(T,()=>{d.isFocusedToastEscapeKeyDownRef.current||_(),d.isFocusedToastEscapeKeyDownRef.current=!1}),children:n.jsx(A.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":d.swipeDirection,...S,ref:f,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:C(t.onKeyDown,i=>{i.key==="Escape"&&(T==null||T(i.nativeEvent),i.nativeEvent.defaultPrevented||(d.isFocusedToastEscapeKeyDownRef.current=!0,_()))}),onPointerDown:C(t.onPointerDown,i=>{i.button===0&&(m.current={x:i.clientX,y:i.clientY})}),onPointerMove:C(t.onPointerMove,i=>{if(!m.current)return;const P=i.clientX-m.current.x,g=i.clientY-m.current.y,L=!!w.current,M=["left","right"].includes(d.swipeDirection),V=["left","up"].includes(d.swipeDirection)?Math.min:Math.max,Te=M?V(0,P):0,ve=M?0:V(0,g),X=i.pointerType==="touch"?10:2,K={x:Te,y:ve},Z={originalEvent:i,delta:K};L?(w.current=K,H(Ae,E,Z,{discrete:!1})):ee(K,d.swipeDirection,X)?(w.current=K,H(_e,b,Z,{discrete:!1}),i.target.setPointerCapture(i.pointerId)):(Math.abs(P)>X||Math.abs(g)>X)&&(m.current=null)}),onPointerUp:C(t.onPointerUp,i=>{const P=w.current,g=i.target;if(g.hasPointerCapture(i.pointerId)&&g.releasePointerCapture(i.pointerId),w.current=null,m.current=null,P){const L=i.currentTarget,M={originalEvent:i,delta:P};ee(P,d.swipeDirection,d.swipeThreshold)?H(je,R,M,{discrete:!0}):H(De,D,M,{discrete:!0}),L.addEventListener("click",V=>V.preventDefault(),{once:!0})}})})})}),d.viewport)})]}):null}),ke=t=>{const{__scopeToast:r,children:o,...e}=t,u=$(O,r),[l,p]=s.useState(!1),[T,v]=s.useState(!1);return We(()=>p(!0)),s.useEffect(()=>{const a=window.setTimeout(()=>v(!0),1e3);return()=>window.clearTimeout(a)},[]),T?null:n.jsx(Ce,{asChild:!0,children:n.jsx(re,{...e,children:l&&n.jsxs(n.Fragment,{children:[u.label," ",o]})})})},Ve="ToastTitle",ue=s.forwardRef((t,r)=>{const{__scopeToast:o,...e}=t;return n.jsx(A.div,{...e,ref:r})});ue.displayName=Ve;var Ke="ToastDescription",le=s.forwardRef((t,r)=>{const{__scopeToast:o,...e}=t;return n.jsx(A.div,{...e,ref:r})});le.displayName=Ke;var de="ToastAction",He=s.forwardRef((t,r)=>{const{altText:o,...e}=t;return o.trim()?n.jsx(fe,{altText:o,asChild:!0,children:n.jsx(Q,{...e,ref:r})}):(console.error(`Invalid prop \`altText\` supplied to \`${de}\`. Expected non-empty \`string\`.`),null)});He.displayName=de;var pe="ToastClose",Q=s.forwardRef((t,r)=>{const{__scopeToast:o,...e}=t,u=Me(pe,o);return n.jsx(fe,{asChild:!0,children:n.jsx(A.button,{type:"button",...e,ref:r,onClick:C(t.onClick,u.onClose)})})});Q.displayName=pe;var fe=s.forwardRef((t,r)=>{const{__scopeToast:o,altText:e,...u}=t;return n.jsx(A.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":e||void 0,...u,ref:r})});function me(t){const r=[];return Array.from(t.childNodes).forEach(e=>{if(e.nodeType===e.TEXT_NODE&&e.textContent&&r.push(e.textContent),$e(e)){const u=e.ariaHidden||e.hidden||e.style.display==="none",l=e.dataset.radixToastAnnounceExclude==="";if(!u)if(l){const p=e.dataset.radixToastAnnounceAlt;p&&r.push(p)}else r.push(...me(e))}}),r}function H(t,r,o,{discrete:e}){const u=o.originalEvent.currentTarget,l=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:o});r&&u.addEventListener(t,r,{once:!0}),e?xe(u,l):u.dispatchEvent(l)}var ee=(t,r,o=0)=>{const e=Math.abs(t.x),u=Math.abs(t.y),l=e>u;return r==="left"||r==="right"?l&&e>o:!l&&u>o};function We(t=()=>{}){const r=W(t);ge(()=>{let o=0,e=0;return o=window.requestAnimationFrame(()=>e=window.requestAnimationFrame(r)),()=>{window.cancelAnimationFrame(o),window.cancelAnimationFrame(e)}},[r])}function $e(t){return t.nodeType===t.ELEMENT_NODE}function Ue(t){const r=[],o=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const u=e.tagName==="INPUT"&&e.type==="hidden";return e.disabled||e.hidden||u?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;o.nextNode();)r.push(o.currentNode);return r}function Y(t){const r=document.activeElement;return t.some(o=>o===r?!0:(o.focus(),document.activeElement!==r))}var Xe=se,Ye=ae,Be=ce,ze=ue,qe=le,Ge=Q;const st=({open:t,onOpenChange:r,title:o,description:e,duration:u=3e3,variant:l="default"})=>n.jsxs(Xe,{swipeDirection:"up",duration:u,children:[n.jsx(Be,{open:t,onOpenChange:r,className:`fixed top-4 right-1/2 translate-x-1/2 w-1/3 z-50 rounded-md shadow-lg px-4 py-3 bg-white border ${l==="success"?"bg-green-50 border-green-500":l==="error"?"bg-red-50 border-red-500":"bg-blue-50 border-blue-500"}`,children:n.jsxs("div",{className:"flex items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx(ze,{className:"text-sm font-medium text-gray-900",children:o}),e&&n.jsx(qe,{className:"mt-1 text-xs text-gray-700",children:e})]}),n.jsx(Ge,{"aria-label":"Close",className:"ml-4 flex-shrink-0 text-gray-400 hover:text-gray-500",children:"×"})]})}),n.jsx(Ye,{className:"fixed bottom-4 right-4 z-50"})]});export{st as T};
