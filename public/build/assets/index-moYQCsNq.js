import{r as c,m as q,j as a,L as z}from"./app-CwzCkPZf.js";import{D as V}from"./delete-confirmation-form-B55ILKdX.js";import{I}from"./input-error-QZDPPMUu.js";import{B as d}from"./button-D6mSC6kj.js";import{C as K}from"./card-9J3xDkxc.js";import{D as X,a as _,b as $,c as G,d as J}from"./dialog-D7U-xV6L.js";import{L as u,I as x}from"./label-DbovscGM.js";import{S as Q,a as U,b as W,c as Y,d as Z}from"./select-CbxNRvoS.js";import{T as aa,a as ea,b as k,c as j,d as ta,e as p}from"./table-hQ7uTzO3.js";import{A as sa}from"./app-layout-CkMliSv0.js";import{S as ra}from"./square-pen-CDtkw2Ra.js";import{X as ia}from"./x-Cr3S9J8W.js";import{L as na}from"./loader-circle-CAZLZFsU.js";import"./createLucideIcon-B5A65qtx.js";import"./utils-jAU0Cazi.js";import"./index-B0Fnjf-p.js";import"./waves-Iue_lL-E.js";import"./Combination-5J8sRYF3.js";import"./index-BsY3OrU1.js";import"./nav-user-pmqD2dbs.js";import"./index-Da9yyfr_.js";import"./chevron-right-DTNbnOAr.js";import"./toast-CjWt9tqQ.js";import"./chart-column-IxKl06iX.js";import"./database-CPSVj6de.js";function Aa({indikator:b,breadcrumb:g,titlePage:T,can:r}){const L=c.useMemo(()=>g?g.map(t=>({title:t.title,href:t.href})):[],[g]),{data:l,setData:i,post:w,put:E,processing:m,errors:N}=q({id:null,nama:"",keterangan:"",attribut:[{batas:0,operator:"",nilai:""}]}),[f,v]=c.useState(null),B=t=>{t.preventDefault(),f==null?w(route("admin.indikator.store"),{preserveState:!0,onSuccess:()=>{i({id:null,nama:"",keterangan:"",attribut:[{batas:0,operator:"",nilai:""}]}),o(!1)},onError:e=>{console.error(e)}}):(console.log(l.attribut),E(route("admin.indikator.update",f),{preserveState:!0,onSuccess:()=>{i({id:null,nama:"",keterangan:"",attribut:[{batas:0,operator:"",nilai:""}]}),v(null),o(!1)},onError:e=>{console.error(e)}}))},[F,o]=c.useState(!1),O=t=>{if(t){const e=b.filter(s=>s.id===t,[])[0];if(v(e.id),e){const s=e.attribut!=null?e.attribut:[{batas:0,operator:"",nilai:""}];i({id:e.id,nama:e.nama,keterangan:e.keterangan,attribut:s})}o(!0)}},[la,A]=c.useState(!1),[oa,da]=c.useState(1),y=t=>{const{name:e,value:s}=t.target,n=e.split(".")[1],h=e.split(".")[0];console.log(n,h),i(S=>({...S,attribut:S.attribut.map((D,R)=>R===Number(n)?{...D,[h]:s}:D)}))},M=()=>{l.attribut.length<3&&i(t=>({...t,attribut:[...t.attribut,{batas:0,operator:"",nilai:""}]}))},H=t=>{i(e=>({...e,attribut:e.attribut.filter((s,n)=>n!==t)}))},P=(t,e)=>{i(s=>({...s,attribut:s.attribut.map((n,h)=>h===Number(t)?{...n,operator:e}:n)}))},C=()=>{if(r.add||r.edit||r.delete)return!0};return a.jsxs(sa,{breadcrumbs:L,children:[a.jsx(z,{title:T??"Indikator"}),a.jsx(K,{children:a.jsxs("div",{className:"container mx-auto px-4",children:[a.jsxs("div",{className:"mb-4 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[a.jsx("h2",{className:"text-lg font-bold md:text-xl",children:"Parameter Prediksi Rumput Laut"}),r.add&&a.jsx("div",{className:"flex flex-col space-y-2 sm:flex-row sm:space-y-0 sm:space-x-2",children:a.jsx(d,{variant:"default",type:"button",className:"cursor-pointer",onClick:()=>o(!0),children:"Tambah Data"})})]}),a.jsx("div",{className:"overflow-x-auto rounded-md border",children:a.jsxs(aa,{className:"min-w-full",children:[a.jsx(ea,{children:a.jsxs(k,{children:[a.jsx(j,{className:"cursor-pointer",children:"no"}),a.jsx(j,{className:"cursor-pointer",children:"Nama"}),a.jsx(j,{className:"cursor-pointer",children:"keterangan"}),C()&&a.jsx(j,{className:"cursor-pointer",children:"Aksi"})]})}),a.jsx(ta,{children:b.length>0?b.map((t,e)=>a.jsxs(k,{children:[a.jsx(p,{children:e+1}),a.jsx(p,{children:t.nama}),a.jsx(p,{children:t.keterangan}),C()&&a.jsx(p,{children:a.jsxs("div",{className:"flex flex-row items-center gap-2",children:[r.edit&&a.jsxs(d,{type:"button",variant:"default",tooltip:"edit",onClick:()=>O(t.id),className:"border border-chart-4 bg-chart-4",children:[" ",a.jsx(ra,{})," "]}),r.delete&&a.jsx(V,{title:`Hapus indikator ${t.id}`,id:t.id,url:route("admin.indikator.destroy",{indikator:t.id}),setOpenDialog:A})]})})]},t.id)):a.jsx(k,{children:a.jsx(p,{colSpan:4,className:"py-4 text-center",children:"No data found"})})})]})})]})}),a.jsx(X,{open:F,onOpenChange:o,children:a.jsxs(_,{children:[a.jsx($,{children:a.jsxs(G,{children:[f?"Edit":"Tambah"," Indikator"]})}),a.jsxs("form",{className:"space-y-4",onSubmit:B,children:[a.jsxs("div",{className:"grid gap-4",children:[a.jsxs("div",{className:"grid gap-2",children:[a.jsx(u,{htmlFor:"nama",className:"text-sm font-medium",children:"Nama Indikator"}),a.jsx(x,{type:"text",value:l.nama,onChange:t=>i("nama",t.target.value),id:"nama",name:"nama",className:"input",disabled:m,placeholder:"Masukkan nama indikator",readOnly:!r.add}),a.jsx(I,{message:N.nama,className:"mt-2"})]}),a.jsxs("div",{className:"grid gap-2",children:[a.jsx(u,{htmlFor:"keterangan",className:"text-sm font-medium",children:"Keterangan"}),a.jsx(x,{type:"text",value:l.keterangan,onChange:t=>i("keterangan",t.target.value),id:"keterangan",name:"keterangan",className:"input",disabled:m,placeholder:"Masukkan keterangan indikator"}),a.jsx(I,{message:N.keterangan,className:"mt-2"})]}),r.add&&r.edit&&r.delete&&a.jsxs("div",{className:"block space-y-2",children:[l.attribut.map((t,e)=>a.jsxs("div",{className:"flex items-center",children:[a.jsxs("div",{className:"",children:[a.jsx(u,{htmlFor:"batas."+e,className:"text-sm font-medium",children:"Batas"}),a.jsx(x,{type:"text",name:"batas."+e,value:l.attribut[e].batas,onChange:y,id:"batas."+e,className:"input",disabled:m,placeholder:"Masukkan batas indikator"})]}),a.jsxs("div",{className:"",children:[a.jsx(u,{htmlFor:"operator."+e,className:"text-sm font-medium",children:"Operator"}),a.jsxs(Q,{value:l.attribut[e].operator||"",required:!0,onValueChange:s=>P(e.toLocaleString(),s),children:[a.jsx(U,{className:"input-minimal",children:a.jsx(W,{placeholder:"Pilih"})}),a.jsx(Y,{children:["<","<=",">"].map((s,n)=>a.jsx(Z,{value:s,children:s},n))})]})]}),a.jsxs("div",{className:"",children:[a.jsx(u,{htmlFor:"nilai."+e,className:"text-sm font-medium",children:"Nilai"}),a.jsx(x,{type:"text",name:"nilai."+e,value:l.attribut[e].nilai,onChange:y,id:"nilai."+e,className:"input",disabled:m,placeholder:"Masukkan nilai indikator"})]}),a.jsx("div",{children:a.jsxs(d,{type:"button",variant:"destructive",size:"sm",onClick:()=>H(e),children:[" ",a.jsx(ia,{})]})})]},e)),a.jsx(d,{type:"button",variant:"outline",size:"sm",onClick:M,children:"+ Tambah Operator"})]})]}),a.jsxs(J,{children:[a.jsx(d,{type:"button",variant:"secondary",onClick:()=>o(!1),children:"Batal"}),a.jsxs(d,{type:"submit",children:[m&&a.jsx(na,{className:"h-4 w-4 animate-spin"}),"Simpan"]})]})]})]})})]})}export{Aa as default};
