var _={},g,y;function E(){if(y)return g;y=1;function h(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}g=h,h.EventEmitter=h,h.prototype._events=void 0,h.prototype._maxListeners=void 0,h.defaultMaxListeners=10,h.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},h.prototype.emit=function(t){var e,r,s,u,f,p;if(this._events||(this._events={}),t==="error"&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var l=new Error('Uncaught, unspecified "error" event. ('+e+")");throw l.context=e,l}if(r=this._events[t],i(r))return!1;if(a(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),r.apply(this,u)}else if(n(r))for(u=Array.prototype.slice.call(arguments,1),p=r.slice(),s=p.length,f=0;f<s;f++)p[f].apply(this,u);return!0},h.prototype.addListener=function(t,e){var r;if(!a(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,a(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(i(this._maxListeners)?r=h.defaultMaxListeners:r=this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),typeof console.trace=="function"&&console.trace())),this},h.prototype.on=h.prototype.addListener,h.prototype.once=function(t,e){if(!a(e))throw TypeError("listener must be a function");var r=!1;function s(){this.removeListener(t,s),r||(r=!0,e.apply(this,arguments))}return s.listener=e,this.on(t,s),this},h.prototype.removeListener=function(t,e){var r,s,u,f;if(!a(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],u=r.length,s=-1,r===e||a(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(r)){for(f=u;f-- >0;)if(r[f]===e||r[f].listener&&r[f].listener===e){s=f;break}if(s<0)return this;r.length===1?(r.length=0,delete this._events[t]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},h.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return arguments.length===0?this._events={}:this._events[t]&&delete this._events[t],this;if(arguments.length===0){for(e in this._events)e!=="removeListener"&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],a(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},h.prototype.listeners=function(t){var e;return!this._events||!this._events[t]?e=[]:a(this._events[t])?e=[this._events[t]]:e=this._events[t].slice(),e},h.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(a(e))return 1;if(e)return e.length}return 0},h.listenerCount=function(t,e){return t.listenerCount(e)};function a(t){return typeof t=="function"}function o(t){return typeof t=="number"}function n(t){return typeof t=="object"&&t!==null}function i(t){return t===void 0}return g}var v={},d={},P;function O(){if(P)return d;P=1,Object.defineProperty(d,"__esModule",{value:!0});var h=function(){function a(o,n){o===void 0&&(o=null),n===void 0&&(n=null),this.item=o,this.parent=n,this.support=1,this.nextSameItemNode=null,this._children=[]}return Object.defineProperty(a.prototype,"children",{get:function(){return this._children},enumerable:!0,configurable:!0}),a.prototype.upsertChild=function(o,n,i){i===void 0&&(i=1);var t=this.getChild(o);return t?t.support+=i:(t=new a(o,this),t.support=i,this._children.push(t),n&&n(t)),t},a.prototype.getChild=function(o){return this._children.find(function(n){return n.item==o})},a}();return d.FPNode=h,d}var w;function S(){if(w)return v;w=1,Object.defineProperty(v,"__esModule",{value:!0});var h=O(),a=function(){function o(n,i){this.supports=n,this._support=i,this._isInit=!1,this.root=new h.FPNode,this._firstInserted={},this._lastInserted={}}return Object.defineProperty(o.prototype,"headers",{get:function(){return this._headers},enumerable:!0,configurable:!0}),o.prototype.fromTransactions=function(n){var i=this;if(this._isInit)throw new Error("Error building the FPTree");return n.forEach(function(t){var e=t.filter(function(r){return i.supports[JSON.stringify(r)]>=i._support}).sort(function(r,s){var u=i.supports[JSON.stringify(s)]-i.supports[JSON.stringify(r)];return u==0?JSON.stringify(s).localeCompare(JSON.stringify(r)):u});i._addItems(e)}),this._headers=this._getHeaderList(),this._isInit=!0,this},o.prototype.fromPrefixPaths=function(n){var i=this;if(this._isInit)throw new Error("Error building the FPTree");return n.forEach(function(t){var e=t.path.filter(function(r){return i.supports[JSON.stringify(r)]>=i._support}).sort(function(r,s){var u=i.supports[JSON.stringify(s)]-i.supports[JSON.stringify(r)];return u==0?JSON.stringify(s).localeCompare(JSON.stringify(r)):u});i._addItems(e,t.support)}),this._headers=this._getHeaderList(),this._isInit=!0,this},o.prototype.getConditionalFPTree=function(n){var i=this._firstInserted[JSON.stringify(n)];if(!i)return null;var t=this.supports[JSON.stringify(n)],e={},r=this._getPrefixPaths(i,t,function(u,f){e[JSON.stringify(u)]=(e[JSON.stringify(u)]||0)+f}),s=new o(e,this._support).fromPrefixPaths(r);return s.root.children.length?s:null},o.prototype.getPrefixPaths=function(n){if(!this._isInit)throw new Error("Error building the FPTree");var i=this._firstInserted[JSON.stringify(n)];return i?this._getPrefixPaths(i,i.support):[]},o.prototype.getPrefixPath=function(n,i){if(!this._isInit)throw new Error("Error building the FPTree");var t=this._getPrefixPath(n,n.support,i);if(t.length!==0)return{support:n.support,path:t}},o.prototype.isSinglePath=function(){if(!this._isInit)throw new Error("Error building the FPTree");return!!this.getSinglePath()},o.prototype.getSinglePath=function(){if(!this._isInit)throw new Error("Error building the FPTree");return this._getSinglePath(this.root)},o.prototype._addItems=function(n,i){var t=this;i===void 0&&(i=1);var e=this.root;n.forEach(function(r){e=e.upsertChild(r,function(s){var u=JSON.stringify(r);t._updateLastInserted(u,s),t._updateFirstInserted(u,s)},i)})},o.prototype._getPrefixPaths=function(n,i,t,e){e===void 0&&(e=[]);var r=this.getPrefixPath(n,t);return r&&e.push(r),n.nextSameItemNode?this._getPrefixPaths(n.nextSameItemNode,i,t,e):e},o.prototype._getPrefixPath=function(n,i,t){return n.parent&&n.parent.parent?(t&&t(n.parent.item,i),[n.parent.item].concat(this._getPrefixPath(n.parent,i,t))):[]},o.prototype._getSinglePath=function(n,i){return i===void 0&&(i=[]),n.children.length==0?i:n.children.length>1?null:(i.push(n.children[0]),this._getSinglePath(n.children[0],i))},o.prototype._updateLastInserted=function(n,i){var t=this._lastInserted[n];t&&(t.nextSameItemNode=i),this._lastInserted[n]=i},o.prototype._updateFirstInserted=function(n,i){var t=this._firstInserted[n];t||(this._firstInserted[n]=i)},o.prototype._getHeaderList=function(){var n=this;return Object.keys(this._firstInserted).sort(function(i,t){return n.supports[i]-n.supports[t]}).map(function(i){return JSON.parse(i)})},o}();return v.FPTree=a,v}var L;function F(){if(L)return _;L=1;var h=_&&_.__extends||function(){var i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(t,e){i(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}}();Object.defineProperty(_,"__esModule",{value:!0});var a=E(),o=S(),n=function(i){h(t,i);function t(e){var r=i.call(this)||this;return r._support=e,r._itemsets=[],r}return t.prototype.exec=function(e,r){var s=this;this._transactions=e,this._support=Math.ceil(this._support*e.length);var u=this._getDistinctItemsCount(this._transactions);return new Promise(function(f,p){var l=new o.FPTree(u,s._support).fromTransactions(s._transactions),c=s._fpGrowth(l,s._transactions.length);r&&r(c),f(c)})},t.prototype._fpGrowth=function(e,r,s){var u=this;return s===void 0&&(s=[]),e.headers.reduce(function(f,p){var l=Math.min(e.supports[JSON.stringify(p)],r),c=s.slice(0);c.push(p),f.push(u._getFrequentItemset(c,l));var m=e.getConditionalFPTree(p);return m?f.concat(u._fpGrowth(m,l,c)):f},[])},t.prototype._handleSinglePath=function(e,r){return[]},t.prototype._getFrequentItemset=function(e,r){var s={items:e,support:r};return this.emit("data",s),s},t.prototype._getDistinctItemsCount=function(e){return e.reduce(function(r,s){return s.reduce(function(u,f){return u[JSON.stringify(f)]=(u[JSON.stringify(f)]||0)+1,u},r)},{})},t}(a.EventEmitter);return _.FPGrowth=n,_}var I=F();export{I as f};
